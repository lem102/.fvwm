DestroyFunc StartFunction
AddToFunc StartFunction
+ I Module FvwmButtons TrayBox
+ I Module FvwmButtons ClockBox
+ I Module FvwmButtons SoundBox
+ I Module FvwmAuto FvwmAutohide -menter enter_handler

DestroyFunc autohide
AddToFunc autohide
+ I ThisWindow ($0) Deschedule $[w.id]
+ I ThisWindow ($0) ThisWindow (Shaded) WindowShade off
+ I TestRc (!Match) All ($0, !Shaded) autohide\_hide $1 $2

DestroyFunc autohide_hide
AddToFunc autohide_hide
+ I Schedule $0 $[w.id] WindowShade $1
# set to a high layer
+ I Schedule $0 $[w.id] Layer 0 1000
+ I Schedule $0 $[w.id] Raise $1
+ I Schedule $0 $[w.id] Deschedule $[w.id]

# Add the windows you want to autohide
DestroyFunc enter_handler
AddToFunc enter_handler
+ I autohide TrayBox 500 S
+ I autohide ClockBox 500 E
+ I autohide SoundBox 500 W

DefaultFont "xft:DejaVu Sans:bold:size=8:antialias=True"

ImagePath $HOME/.fvwm:+

# SelectWindow(shouldWarp: boolean)
AddToFunc SelectWindow
+ I Focus
+ I Iconify false
+ I Raise
+ I Test ($0) WarpToWindow 0 0

DestroyFunc EmacsRofi
AddToFunc EmacsRofi
+ I Next ("*Emacs*") SelectWindow false
+ I Next ("*Emacs*") Exec exec emacsclient --eval "(jacob-rofi)"
+ I None ("*Emacs*") Exec exec emacs

DestroyFunc WindowListFunc
AddToFunc WindowListFunc
+ I FlipFocus
+ I Raise
+ I Iconify "off"

DestroyFunc LeftClickTitleBehaviour
AddToFunc LeftClickTitleBehaviour
+ M Move
+ D Maximize
+ I Raise

# DestroyFunc LeftClickIconBehaviour
AddToFunc LeftClickIconBehaviour
+ M Move
+ D Iconify "off"

DestroyFunc Screenshot
AddToFunc Screenshot
+ I Exec exec "$[FVWM_USERDIR]/screenshot"

DestroyFunc Record
AddToFunc Record
+ I Exec exec simplescreenrecorder

DestroyFunc FocusAndRaise
AddToFunc FocusAndRaise
+ I Focus
+ I Raise
+ I Iconify "off"

# ResizeMove frame means we include the frame of each window in the percentages given to Resize

DestroyFunc MoveWindowLeftSide
AddToFunc MoveWindowLeftSide
+ I ResizeMove frame 50wa 100wa 0 0
+ I SelectWindow True

DestroyFunc MoveWindowRightSide
AddToFunc MoveWindowRightSide
+ I ResizeMove frame 50wa 100wa 50 0
+ I SelectWindow True

FocusStyle * SortWindowListByFocus
Style * ClickToFocus, ClickToFocusPassesClickOff
Style * MwmBorder, DepressableBorder

AddButtonStyle 1 Vector 5 20x20@3 80x20@3 80x80@3 20x80@3 20x20@3
AddButtonStyle 3 Vector 4 20x50@3 80x80@3 80x20@3 20x50@3
AddButtonStyle 5 Vector 4 80x50@3 20x80@3 20x20@3 80x50@3

AddButtonStyle 2 Vector 4 20x20@3 80x80@3 20x80@4 80x20@3
AddButtonStyle 4 Vector 2 20x50@3 80x50@3

Style TrayBox !Title, !Borders, !Handles, Sticky, NeverFocus, WindowListSkip
Style ClockBox !Title, !Borders, !Handles, Sticky, NeverFocus, WindowListSkip
Style SoundBox !Title, !Borders, !Handles, Sticky, NeverFocus, WindowListSkip

EwmhBaseStruts 1 1 1 1

Colorset 0 fg Contrast, \
           bg grey40, \
           hi #dd5500, \
           sh #000000

Colorset 1 fg Contrast, \
           bg grey20, \
           hi #552200, \
           sh #000000

Mouse 1 2 A Close
Mouse 1 4 A Iconify

Mouse 1 1 A Maximize
Mouse 1 3 A MoveWindowLeftSide
Mouse 1 5 A MoveWindowRightSide

Mouse 1 T A LeftClickTitleBehaviour

Mouse 1 I A LeftClickIconBehaviour

Mouse 1 R A EmacsRofi
Mouse 3 R A Menu StartMenu

Key Print A N Screenshot
Key Print A M Record
Key Tab A M WindowList Root c c NoDeskSort, SelectOnRelease Meta_L, CurrentAtEnd, NoGeometry, IconifiedAtEnd

Key Super_L A A EmacsRofi

DestroyModuleConfig TrayBox:*
*TrayBox: Geometry 300x30-0-0
*TrayBox: Columns 1
*TrayBox: Rows 1
*TrayBox: Colorset 0
*TrayBox: (1x1, Swallow(NoClose, UseOld) stalonetray)

DestroyModuleConfig ClockBox:*
*ClockBox: Geometry 200x230-0+0
*ClockBox: Columns 20
*ClockBox: Rows 23
*ClockBox: Colorset 0
*ClockBox: (20x20, Swallow(NoClose,UseOld) xclock)
*ClockBox: (20x3, Swallow DateTime 'Module FvwmScript FvwmScript-DateTime')

DestroyModuleConfig SoundBox:*
*SoundBox: Geometry 150x100+0+0
*SoundBox: Colorset 0
*SoundBox: (1x1, Swallow Volume 'Module FvwmScript FvwmScript-Volume')

DestroyModuleConfig FvwmScript:*
*FvwmScript: DefaultColorset 0
